{"ast":null,"code":"import _regeneratorRuntime from\"C:/forgetech/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/forgetech/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/forgetech/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";// import axios from \"axios\";\nimport Novicedetails from\"./Novicedetails\";import{Row,Col}from\"react-bootstrap\";import Navbar from\"./Navbar\";import{useCookies}from\"react-cookie\";import Cartnproduct from\"./Cartnproduct\";// import Button from 'react-bootstrap/Button'\nimport{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CryptoJS=require(\"crypto-js\");var Cart=function Cart(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),nproducts=_useState2[0],setnproducts=_useState2[1];var total=0;var _useCookies=useCookies(\"user\"),_useCookies2=_slicedToArray(_useCookies,1),cookies=_useCookies2[0];var bytes=CryptoJS.AES.decrypt(cookies.user,\"my-secret-key@123\");var decryptedData=JSON.parse(bytes.toString(CryptoJS.enc.Utf8));var user=decryptedData.email;useEffect(function(){var fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,d,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:8080/cart\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:user})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:d=_context.sent;console.log(d.user.cart);data=d.user.cart;// console.log(data);\nsetnproducts(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function fetchProducts(){return _ref.apply(this,arguments);};}();fetchProducts();},[]);function getTotal(){for(var i=0;i<nproducts.length;i++){total+=nproducts[i].price;}console.log(total);return true;}if(nproducts&&getTotal()){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(Row,{children:nproducts.map(function(nproduct,i){return/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Cartnproduct,{nproduct:nproduct})},i);})}),/*#__PURE__*/_jsxs(Link,{to:\"/shipping\",className:\"btn btn-warning\",children:[\" \",\"Move to Shipping : Your Total Payable is \",total]})]});}else{return/*#__PURE__*/_jsx(\"div\",{children:\"Loading!\"});}};export default Cart;","map":{"version":3,"names":["React","useState","useEffect","Novicedetails","Row","Col","Navbar","useCookies","Cartnproduct","Link","CryptoJS","require","Cart","nproducts","setnproducts","total","cookies","bytes","AES","decrypt","user","decryptedData","JSON","parse","toString","enc","Utf8","email","fetchProducts","fetch","method","headers","body","stringify","res","json","d","console","log","cart","data","getTotal","i","length","price","map","nproduct"],"sources":["C:/forgetech/frontend/src/Cart.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n// import axios from \"axios\";\r\nimport Novicedetails from \"./Novicedetails\";\r\nimport { Row, Col } from \"react-bootstrap\";\r\nimport Navbar from \"./Navbar\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport Cartnproduct from \"./Cartnproduct\";\r\n// import Button from 'react-bootstrap/Button'\r\nimport { Link } from 'react-router-dom'\r\nvar CryptoJS = require(\"crypto-js\");\r\n\r\n\r\nconst Cart = () => {\r\n  const [nproducts, setnproducts] = useState([]);\r\n  var total = 0; \r\n  const [cookies] = useCookies(\"user\");\r\n  var bytes = CryptoJS.AES.decrypt(cookies.user, \"my-secret-key@123\");\r\n  var decryptedData = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\r\n  const user = decryptedData.email;\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      const res = await fetch(\"http://localhost:8080/cart\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          user,\r\n        }),\r\n      });\r\n\r\n      const d = await res.json();\r\n      console.log(d.user.cart);\r\n      const data = d.user.cart;\r\n      // console.log(data);\r\n      setnproducts(data);\r\n    };\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  function getTotal() {\r\n    for(var i = 0; i < nproducts.length; i++) {\r\n      total+=nproducts[i].price\r\n    }\r\n    console.log(total);\r\n    return true\r\n  }\r\n\r\n  if (nproducts && getTotal()) {\r\n    return (\r\n      <>\r\n        <Navbar />\r\n        <Row>\r\n        \r\n          {nproducts.map((nproduct, i) => (\r\n            <Col key={i} md={3}>\r\n              <Cartnproduct nproduct={nproduct} />\r\n            </Col>\r\n          ))}\r\n        </Row>\r\n        <Link to=\"/shipping\" className=\"btn btn-warning\">\r\n        {\" \"}\r\n\r\n        Move to Shipping : Your Total Payable is {total}\r\n      </Link>\r\n      </>\r\n    );\r\n  }\r\n  else {\r\n    return (\r\n      <div>\r\n        Loading!\r\n      </div>\r\n    )\r\n  }\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"iVAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA;AACA,MAAOC,cAAP,KAA0B,iBAA1B,CACA,OAASC,GAAT,CAAcC,GAAd,KAAyB,iBAAzB,CACA,MAAOC,OAAP,KAAmB,UAAnB,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CACA;AACA,OAASC,IAAT,KAAqB,kBAArB,C,6IACA,GAAIC,SAAQ,CAAGC,OAAO,CAAC,WAAD,CAAtB,CAGA,GAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjB,cAAkCX,QAAQ,CAAC,EAAD,CAA1C,wCAAOY,SAAP,eAAkBC,YAAlB,eACA,GAAIC,MAAK,CAAG,CAAZ,CACA,gBAAkBR,UAAU,CAAC,MAAD,CAA5B,4CAAOS,OAAP,iBACA,GAAIC,MAAK,CAAGP,QAAQ,CAACQ,GAAT,CAAaC,OAAb,CAAqBH,OAAO,CAACI,IAA7B,CAAmC,mBAAnC,CAAZ,CACA,GAAIC,cAAa,CAAGC,IAAI,CAACC,KAAL,CAAWN,KAAK,CAACO,QAAN,CAAed,QAAQ,CAACe,GAAT,CAAaC,IAA5B,CAAX,CAApB,CACA,GAAMN,KAAI,CAAGC,aAAa,CAACM,KAA3B,CAEAzB,SAAS,CAAC,UAAM,CACd,GAAM0B,cAAa,4FAAG,0KACFC,MAAK,CAAC,4BAAD,CAA+B,CACpDC,MAAM,CAAE,MAD4C,CAEpDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF2C,CAKpDC,IAAI,CAAEV,IAAI,CAACW,SAAL,CAAe,CACnBb,IAAI,CAAJA,IADmB,CAAf,CAL8C,CAA/B,CADH,QACdc,GADc,qCAWJA,IAAG,CAACC,IAAJ,EAXI,QAWdC,CAXc,eAYpBC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAAChB,IAAF,CAAOmB,IAAnB,EACMC,IAbc,CAaPJ,CAAC,CAAChB,IAAF,CAAOmB,IAbA,CAcpB;AACAzB,YAAY,CAAC0B,IAAD,CAAZ,CAfoB,sDAAH,kBAAbZ,cAAa,0CAAnB,CAiBAA,aAAa,GACd,CAnBQ,CAmBN,EAnBM,CAAT,CAqBA,QAASa,SAAT,EAAoB,CAClB,IAAI,GAAIC,EAAC,CAAG,CAAZ,CAAeA,CAAC,CAAG7B,SAAS,CAAC8B,MAA7B,CAAqCD,CAAC,EAAtC,CAA0C,CACxC3B,KAAK,EAAEF,SAAS,CAAC6B,CAAD,CAAT,CAAaE,KAApB,CACD,CACDP,OAAO,CAACC,GAAR,CAAYvB,KAAZ,EACA,MAAO,KAAP,CACD,CAED,GAAIF,SAAS,EAAI4B,QAAQ,EAAzB,CAA6B,CAC3B,mBACE,wCACE,KAAC,MAAD,IADF,cAEE,KAAC,GAAD,WAEG5B,SAAS,CAACgC,GAAV,CAAc,SAACC,QAAD,CAAWJ,CAAX,qBACb,KAAC,GAAD,EAAa,EAAE,CAAE,CAAjB,uBACE,KAAC,YAAD,EAAc,QAAQ,CAAEI,QAAxB,EADF,EAAUJ,CAAV,CADa,EAAd,CAFH,EAFF,cAUE,MAAC,IAAD,EAAM,EAAE,CAAC,WAAT,CAAqB,SAAS,CAAC,iBAA/B,WACC,GADD,6CAG0C3B,KAH1C,GAVF,GADF,CAkBD,CAnBD,IAoBK,CACH,mBACE,iCADF,CAKD,CACF,CAhED,CAkEA,cAAeH,KAAf"},"metadata":{},"sourceType":"module"}